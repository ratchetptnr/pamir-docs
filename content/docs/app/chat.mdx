---
title: Chat
description: The primary conversational interface — where every other tool feeds into and out of.
---

import { Callout } from 'fumadocs-ui/components/callout'

<Callout title="Product Philosophy">
  "The conversation is the product." Every other tool — terminal, editor, files — feeds into and out of the conversation. Chat is not a feature; it's the operating surface.
</Callout>

## The Conversation Model

Chat tabs are the primary way to interact with the Shadow Agent. Each tab is an independent conversation with its own persistent history, context window, and working state. You can run multiple chats in parallel — one debugging a server issue, another drafting documentation — without cross-contamination.

The conversation goes beyond simple text exchange. The AI produces structured outputs when appropriate: help cards, context gauges, plan task lists, terminal results, and research summaries. Each response type exists because a user needed something more than prose.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-main.png"
    alt="Chat interface with conversation"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

<Callout type="info">
Each Chat tab has a unique persistent history. Opening the same tab later will restore all previous messages.
</Callout>

### Messages

Your messages appear as blue bubbles aligned to the right, following the familiar iMessage pattern. The agent's responses appear left-aligned with full markdown rendering — headings, bold, italic, inline code, syntax-highlighted code blocks, and lists.

While the AI is working, you'll see a **thinking indicator** (animated dots) to signal processing is underway. Once the response arrives, it appears in full with proper formatting. The LED strip provides visual feedback about what the agent is doing — thinking, executing commands, or analyzing — without requiring you to stare at the input waiting for a response.

---

## The Input System

<Callout type="info">
  "One surface for everything." The input area is where you compose, attach, and command. It adapts to what you're doing without requiring you to switch modes or open separate dialogs.
</Callout>

The input area at the bottom of the screen holds a growing text field (expands from one line up to six as you type), attachment chips for images and files you've added, and controls for mode and model selection.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-input-system.png"
    alt="Chat input area with text field, attachment chips, mode toggle, and model selector"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

### Mode Toggle

The chat supports two conversation modes, toggled via the mode button or the `/plan` command:

| Mode | Behavior | When to Use |
| :--- | :--- | :--- |
| **Auto** | Freeform conversation. The AI responds naturally with text, code, and explanations. | General questions, debugging, brainstorming, code generation |
| **Plan** | Structured task output. The AI breaks work into discrete steps with checkable items. | Multi-step implementations, project planning, complex refactors |

Plan mode changes the visual tone of the input card (purple accent) to signal you're in a structured workflow. The AI's responses shift from prose to actionable task lists.

### Model Selector

Not every question needs the same model. The input card includes a model selector for choosing the right tool for the task:

| Model | Strength |
| :--- | :--- |
| **Claude Haiku** | Fast responses. Best for quick questions, simple code generation, and conversational exchanges. |
| **Claude Sonnet** | Balanced reasoning. Better for complex analysis, multi-file changes, and nuanced problems. |
| **Claude Opus** | Deep reasoning and structured output. Best for planning, long-context tasks, and intricate problem-solving. |

---

## Bringing Context In

<Callout type="info">
  "The AI is only as good as the context you give it." Every attachment mechanism exists to reduce the gap between what you know and what the AI knows.
</Callout>

### The Attachment Menu

Tap the **+** button to open the attachment menu — a grid of six tiles organized by intent:

| Category | Tile | Purpose |
| :--- | :--- | :--- |
| **Capture** | **Camera** | Photograph a whiteboard, error screen, or physical document |
| | **Photos** | Select images from your photo library (up to 20 per conversation) |
| **Reference** | **Files** | Browse and attach documents from your iPhone (PDFs, text files, spreadsheets, images, archives) |
| | **Distiller** | Browse and attach files from the Distiller device's filesystem |
| **Action** | **Terminal** | Open an inline terminal session without leaving the chat |
| | **Commands** | Jump straight to the slash command menu |

**Why two file sources?** "Files" opens your iPhone's native file browser — iCloud, local storage, third-party providers. "Distiller" opens the device's project filesystem. They serve different contexts: your phone's documents vs. the device's working directory.

When you attach images or files, they appear as **chips** inside the input card — small thumbnails for images, labeled pills for files — so you can see and remove them before sending.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-attachment-menu.png"
    alt="Attachment menu showing six tiles: Camera, Photos, Files, Distiller, Terminal, Commands"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

### File References

Type **@** in the input to trigger the **file reference picker** — a filtered popup showing files from the Distiller device. This is the quick-access complement to browsing the full Distiller filesystem via the attachment menu. As you type after the "@", the list filters in real time.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-file-reference-picker.png"
    alt="File reference picker popup showing filtered files"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

File references appear as chips both in the input card and in the sent message bubble, making it clear which files the AI was given as context.

### Slash Commands

Type **/** to open the **command menu** — a categorized popup of structured actions you can invoke inside natural language. This is the MVP list; the roadmap includes supporting all Claude Code commands.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-slash-command-menu.png"
    alt="Slash command menu popup showing Core and Skill categories"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

| Command | Category | What It Does |
| :--- | :--- | :--- |
| `/help` | Core | Show a formatted card with all available commands |
| `/clear` | Core | Clear the conversation history for this tab |
| `/compact` | Core | Compress message history to free up context space |
| `/context` | Core | Show a detailed breakdown of context usage (tokens, messages, percentage) |
| `/plan` | Core | Toggle Plan mode on or off |
| `/commit` | Skill | Stage and commit changes with an optional message |
| `/review` | Skill | Request a code review of a specified scope |

**Core** commands execute immediately (clear, compact) or toggle state (plan). **Skill** commands are inserted into the input and sent to the AI for execution, combining natural language with structured intent.

---

## Awareness & Feedback

<Callout type="info">
  "The system should always tell you what it's doing." Ambient indicators keep you informed without demanding attention — you should never have to wonder whether the AI is thinking, responding, or stuck.
</Callout>

### The LED Strip (Experimental)

A 7-segment LED strip appears above the input card during active operations. The design is experimental and will eventually match the lighting patterns displayed on the physical device's LED strip, providing unified feedback whether you're watching the device or the phone.

See [LED Indicators](/docs/device/led) for the device's LED behavior.

### Context Tracking

Every conversation has a finite context window determined by the Claude model in use. The app surfaces this as two complementary tools:

**The Meter** — a compact circular gauge in the chat toolbar, always visible. It shows the current context usage as a percentage with color coding:

| Usage | Color | Signal |
| :--- | :--- | :--- |
| Below 60% | Green | Plenty of room |
| 60–85% | Yellow | Getting full — consider compacting |
| Above 85% | Red | Near limit — compact or start a new tab |

**The `/context` Card** — type `/context` to see a detailed breakdown: total tokens used, message count, and a visual progress bar. This is the "check engine light" — you use it when you want specifics, not just a glance.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-context-card.png"
    alt="Context card showing token usage gauge, message count, and usage percentage"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

When context runs high, use `/compact` to compress the conversation history. The AI summarizes earlier messages into a condensed form, freeing space for new exchanges without losing the thread.

---

## Message Richness

Responses appear as markdown-rendered text with support for headings, bold, italic, inline code, syntax-highlighted code blocks, and lists. When Claude is processing your request, you'll see a **thinking indicator** showing it's working.

The app also provides custom response cards for certain commands:

| Response Type | When It Appears | What It Contains |
| :--- | :--- | :--- |
| **Text** | Standard replies | Markdown-rendered prose, code, lists |
| **Thinking** | While processing | Animated indicator showing Claude is working |
| **Help Card** | After `/help` | Formatted card with all available commands |
| **Context Card** | After `/context` | Visual gauge with token count, message count, and usage percentage |

### File References from Claude

When Claude references a file in its response — whether it's a code file, PDF, document, or any other file type — the app renders it as a rich attachment card rather than plain text. This follows the same pattern you're familiar with from messaging apps: files appear as tappable cards with previews, not just links.

Images display inline; PDFs, text files, and code files appear as downloadable attachments with appropriate icons and metadata. This makes it easy to grab files Claude is discussing without hunting through URLs.

### Images in Conversation

When you attach images (via Camera or Photos), they appear in your sent message as tappable thumbnails. A single image displays at a comfortable preview size; multiple images arrange in a compact grid.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-with-images.png"
    alt="Chat showing user message with image attachments in a grid"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

**Tap any image** to open a full-screen preview using the native iOS viewer — pinch-to-zoom, share, and dismiss are all standard gestures.

### System Messages

The chat produces centered system messages for state changes that aren't part of the conversation itself:

- **Mode changes** — when you toggle between Auto and Plan
- **Chat cleared** — after `/clear`
- **History compacted** — after `/compact`
- **Errors** — when something fails (color-coded red)

These are deliberately minimal and centered to distinguish them from the conversational flow.

---

## Persistence & Continuity

Chat history is saved to disk on a per-tab basis. Closing the app, switching projects, or restarting your phone will not lose your conversation — messages, images, and attachments all persist together.

Deleting a tab removes its entire message history.

### Memory Integration [Experimental]

The **brain icon** in the chat toolbar opens your project's Memory — a growing knowledge base of insights and decisions. This feature is still in MVP and evolving.

See [Memory](/docs/app/shadow-agent/notes) for more details.

---

## Empty State

When a chat has no messages, it displays a centered prompt encouraging you to start a conversation. This is intentionally minimal — the empty state should feel like a blank page, not a tutorial.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-empty.png"
    alt="Empty chat state"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>
