---
title: Chat (WIP)
description: The primary conversational interface — where every other tool feeds into and out of.
---

import { Callout } from 'fumadocs-ui/components/callout'

<Callout title="Product Philosophy">
  "The conversation is the product." Every other tool — terminal, editor, files — feeds into and out of the conversation. Chat is not a feature; it's the operating surface.
</Callout>

## The Conversation Model

Each chat window is an independent conversation with its own history and context. Multiple chat windows can run in parallel without affecting each other.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-main.png"
    alt="Chat interface with conversation"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

<Callout type="info">
Each chat window has a unique persistent history. Opening the same window later will restore all previous messages.
</Callout>

### Messages

AI responses are rendered as markdown with syntax-highlighted code blocks. A thinking indicator shows while the AI is processing, and the LED strip above the input reflects the current activity state.

---

## The Input System

<Callout type="info">
  "One surface for everything." The input area is where you compose, attach, and command. It adapts to what you're doing without requiring you to switch modes or open separate dialogs.
</Callout>

The input area at the bottom of the screen contains a growing text field (expands from one line up to six as you type) and a row of action buttons: **+** (attachments), **terminal**, and **send**. When you attach files, their chips appear above the text field.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-input-system.png"
    alt="Chat input area with text field and action buttons"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

---

## Bringing Context In

<Callout type="info">
  "The AI is only as good as the context you give it." Every attachment mechanism exists to reduce the gap between what you know and what the AI knows.
</Callout>

### The Attachment Menu

Tap the **+** button to open the attachment menu — a grid of tiles organized by intent:

| Category | Tile | Purpose |
| :--- | :--- | :--- |
| **Capture** | **Camera** | Photograph a whiteboard, error screen, or physical document |
| | **Photos** | Select images from your photo library |
| **Reference** | **Files** | Browse and attach documents from your iPhone (PDFs, text files, spreadsheets, images, archives) |
| | **Distiller** | Browse and attach files from the Distiller device's filesystem |
| **Action** | **Commands** | Jump straight to the slash command menu |

<Callout type="warn">
Camera and Photos are not part of v1. The tiles are present in the UI but image capture and photo library selection are planned for a future release.
</Callout>

**Why two file sources?** "Files" opens your iPhone's native file browser — iCloud, local storage, third-party providers. "Distiller" opens the device's project filesystem. They serve different contexts: your phone's documents vs. the device's working directory.

When you attach files, they appear as **chips** inside the input card — labeled pills so you can see and remove them before sending.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-attachment-menu.png"
    alt="Attachment menu showing tiles: Camera, Photos, Files, Distiller, Commands"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

### Quick Terminal Access

The input bar includes a dedicated **terminal button** to quickly open a terminal session without leaving the chat.

<Callout type="warn">
**Planned UX update:** Terminal sessions opened from within a chat should also be accessible from the Workspace (and vice versa). The terminal sheet should show existing open terminal windows and allow creating new ones — unifying terminal access across chat and workspace.
</Callout>

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-terminal-view.png"
    alt="Terminal sheet presented over the chat interface"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

### File References

Type **@** in the input to trigger the **file reference picker** — a filtered popup showing files from the Distiller device. This is the quick-access complement to browsing the full Distiller filesystem via the attachment menu. As you type after the "@", the list filters in real time.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-file-picker.png"
    alt="File reference picker popup showing filtered files"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

File references appear as chips both in the input card and in the sent message bubble, making it clear which files the AI was given as context.

### Slash Commands

Type **/** to open the **command menu** — a categorized popup of structured actions you can invoke inside natural language. This is the MVP list; the roadmap includes supporting all Claude Code commands.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-slash-command-menu.png"
    alt="Slash command menu popup showing Core and Skill categories"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

| Command | Category | What It Does |
| :--- | :--- | :--- |
| `/help` | Core | Show a formatted card with all available commands |
| `/clear` | Core | Clear the conversation history for this window |
| `/compact` | Core | Compress message history to free up context space |
| `/context` | Core | Show a detailed breakdown of context usage (tokens, messages, percentage) |
| `/plan` | Core | Toggle Plan mode on or off |
| `/commit` | Skill | Stage and commit changes with an optional message |
| `/review` | Skill | Request a code review of a specified scope |

**Core** commands execute immediately (clear, compact) or toggle state (plan). **Skill** commands are inserted into the input and sent to the AI for execution, combining natural language with structured intent.

---

## Awareness & Feedback

<Callout type="info">
  "The system should always tell you what it's doing." Ambient indicators keep you informed without demanding attention — you should never have to wonder whether the AI is thinking, responding, or stuck.
</Callout>

### The LED Strip (Experimental)

A 7-segment LED strip appears above the input card during active operations. The design is experimental and will eventually match the lighting patterns displayed on the physical device's LED strip, providing unified feedback whether you're watching the device or the phone.

See [LED Indicators](/docs/device/led) for the device's LED behavior.

### Context Tracking

Every conversation has a finite context window determined by the Claude model in use. The app surfaces this as two complementary tools:

**The Meter** — a compact circular gauge in the chat toolbar, always visible. It shows the current context usage as a percentage with color coding:

| Usage | Color | Signal |
| :--- | :--- | :--- |
| Below 60% | Green | Plenty of room |
| 60–85% | Yellow | Getting full — consider compacting |
| Above 85% | Red | Near limit — compact or start a new window |

**The `/context` Card** — type `/context` to see a detailed breakdown: total tokens used, message count, and a visual progress bar. This is the "check engine light" — you use it when you want specifics, not just a glance.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-context-card.png"
    alt="Context card showing token usage gauge, message count, and usage percentage"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

When context runs high, use `/compact` to compress the conversation history. The AI summarizes earlier messages into a condensed form, freeing space for new exchanges without losing the thread.

---

## Message Richness

Responses appear as markdown-rendered text with support for headings, bold, italic, inline code, syntax-highlighted code blocks, and lists. When Claude is processing your request, you'll see a **thinking indicator** showing it's working.

### File References from Claude

When Claude references a file in its response — whether it's a code file, PDF, document, or any other file type — the app renders it as a rich attachment card rather than plain text. Files appear as tappable cards with previews. Images display inline; PDFs, text files, and code files appear as downloadable attachments with appropriate icons and metadata.

<Callout type="warn">
Not part of v1. Planned for a future release.
</Callout>

### Images in Conversation

<Callout type="warn">
Image attachments in conversation are not part of v1. This feature is planned for a future release alongside Camera and Photos support.
</Callout>

### System Messages

The chat produces centered system messages for state changes that aren't part of the conversation itself:

- **Mode changes** — when you toggle between Auto and Plan
- **Chat cleared** — after `/clear`
- **History compacted** — after `/compact`
- **Errors** — when something fails (color-coded red)

These are deliberately minimal and centered to distinguish them from the conversational flow.

---

## Persistence & Continuity

Chat history is saved to disk on a per-window basis. Closing the app, switching projects, or restarting your phone will not lose your conversation — messages and attachments all persist together.

Closing a chat window from the [Workspace](./workspace) archives it — the full message history is preserved and can be restored at any time from Chat History. Chat messages are never deleted.

---

## Navigation Bar

The chat toolbar shows two lines: the **chat title** on top and a **project breadcrumb** below it in a smaller, secondary style.

The chat title is auto-generated from the first message you send — the first few words of your prompt become the window's name in the Workspace list. Before the first message, it simply reads "Chat."

The breadcrumb shows which project (and device) you're working in:
- **Single device** — just the project name (e.g., "Pamir App")
- **Multiple devices** — device and project (e.g., "Home Office / Pamir App")

The trailing side of the toolbar shows the **context meter** — a compact circular gauge indicating how much of the context window has been used.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-nav-bar.png"
    alt="Chat navigation bar showing title, breadcrumb, and context meter"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

## Empty State & Suggestions

When a chat has no messages, it displays a time-based greeting ("Good morning", "Good afternoon", or "Good evening") with a prompt to get started. Below the input, four **suggestion chips** appear — randomly selected from a pool of common starting prompts like "Help me debug an error", "Write a Python script", or "Explain this code." Tapping a chip sends it as your first message.

<div className="flex justify-center my-8">
  <img
    src="/docs/app/chat-empty.png"
    alt="Empty chat state with greeting and suggestion chips"
    className="w-full max-w-[320px] rounded-2xl border shadow-xl"
  />
</div>

Suggestions also appear dynamically after AI responses when the agent offers follow-up actions or next steps. These replace the starter chips once the conversation is underway.
