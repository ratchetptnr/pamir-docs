---
title: Tunnels
description: The core feature â€” SSH tunnels, port forwarding, and IDE access.
---

import { Callout } from 'fumadocs-ui/components/callout'

<Callout title="Product Philosophy">
  **Tunnels are the product.** Everything else in the desktop app exists to support one thing: making the Distiller's services accessible at `localhost` on the user's machine.
</Callout>

## How It Works

When you connect to a Distiller device, the app:

1. **Establishes an SSH connection** to the device
2. **Queries running services** â€” asks the device what ports have listeners
3. **Creates local port forwards** â€” maps each remote port to a local port
4. **Monitors services** â€” polls periodically for new/stopped services and updates tunnels

This means when Claude Code starts a dev server on port 3000 on the Distiller, within seconds `http://localhost:3000` works on your machine. No manual setup.

**Smart port remapping:** If a remote port (e.g. 3000) is already occupied locally, the app automatically assigns the next available local port (e.g. 3001). The user sees the actual local port in the services list â€” no confusion.

```
Your Machine                         Distiller Device
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SSH Tunnel     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚â—„â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–ºâ”‚                  â”‚
â”‚ localhost:22 â”‚â”€â”€â”€â”€â”€â”€ port 22 â”€â”€â”€â”‚ SSH server       â”‚
â”‚ localhost:3000â”‚â”€â”€â”€â”€ port 3000 â”€â”€â”‚ Next.js dev      â”‚
â”‚ localhost:8080â”‚â”€â”€â”€â”€ port 8080 â”€â”€â”‚ API server       â”‚
â”‚ localhost:5432â”‚â”€â”€â”€â”€ port 5432 â”€â”€â”‚ PostgreSQL       â”‚
â”‚              â”‚                  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## The Main Panel

The tray popover is the primary interface. It has three sections:

### 1. Header

```
â— Distiller 1          â–¾      âš™ï¸
Connected Â· 22ms Â· 3 tunnels
```

- **Device selector** (â–¾) â€” dropdown to switch between paired devices or add a new one
- **Settings gear** (âš™ï¸) â€” opens the settings window
- **Status line** â€” connection state, round-trip latency, active tunnel count

### 2. Access

One-click actions to connect to the device. No copy-pasting.

```
â”€â”€ Access â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   [ ðŸ–¥  Open in VS Code ]

   [ >_  SSH Terminal     ]
```

- **Open in VS Code** â€” launches VS Code with an SSH remote connection to the device. One click, no configuration.
- **SSH Terminal** â€” opens a terminal session to the device.

The app manages `~/.ssh/config` behind the scenes so that `ssh distiller-8x29` just works. VS Code Remote SSH picks it up automatically.

<Callout type="info">
  The app writes SSH config entries behind the scenes, so `ssh distiller-8x29` also works from any terminal or IDE. But the primary path is the one-click button â€” no copy-paste needed.
</Callout>

### 3. Services

Auto-discovered services running on the device. All tunnelling is automatic â€” no manual port configuration.

```
â”€â”€ Services â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ðŸŸ¢ Web Dev (3000)
   http://localhost:3000

ðŸŸ¢ API Server (8080)
   http://localhost:8080

ðŸŸ¢ PostgreSQL (5432)
   localhost:5432

ðŸŸ¢ Redis (6379)
   localhost:6379
```

Each service shows:
- **Status indicator** â€” green when tunnel is active, yellow when connecting, red when the remote service stopped
- **Friendly name** â€” auto-labeled from well-known ports
- **Local address** â€” what to use on your machine. If the default local port is occupied, the app auto-assigns the next available port.

---

## Auto-Detection

The app queries the device for listening ports over the SSH connection and classifies them by well-known port numbers.

### Well-Known Port Labels

| Port(s) | Auto-label | Icon |
| :--- | :--- | :--- |
| 22 | SSH | Terminal icon |
| 80, 443 | Web Server | Globe |
| 3000, 3001, 4000, 5173, 5174, 8000 | Web Dev | Globe |
| 8080, 8443 | App Server | Globe |
| 5432 | PostgreSQL | Database icon |
| 3306 | MySQL | Database icon |
| 27017 | MongoDB | Database icon |
| 6379 | Redis | Database icon |
| 11211 | Memcached | Database icon |
| Any other | Port XXXX | Generic icon |

Unknown ports appear as "Port XXXX".

### Detection Behavior

- **On connect**: Full port scan, all detected services appear immediately
- **Polling**: Every 5 seconds, check for new/stopped services
- **New service detected**: Tunnel created automatically, appears in list with a subtle entrance animation
- **Service stopped**: Status dot turns red, tunnel remains in list for 30 seconds, then fades out (in case it restarts)
- **User-renamed services**: Persist even after the service stops and restarts

<Callout type="info">
  All tunnelling is automatic. Users don't manually add tunnels â€” they start a service on the device and it appears. Port conflicts are resolved automatically by assigning the next available local port.
</Callout>

---

## SSH Config Management

The app manages a block in `~/.ssh/config` for each paired device:

```
# â”€â”€ Distiller (managed) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Host distiller-8x29
    HostName 192.168.1.42
    User distiller
    Port 22
    IdentityFile ~/.ssh/distiller_ed25519
# â”€â”€ End Distiller â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

This means every tool that reads `~/.ssh/config` automatically works:
- **VS Code Remote SSH** â€” sees `distiller-8x29` in the host list
- **Cursor** â€” same Remote SSH extension, same config
- **JetBrains Gateway** â€” reads SSH config for connection targets
- **Plain terminal** â€” `ssh distiller-8x29` just works

The app only writes within its own managed block (between the comment markers). It never modifies the user's other SSH config entries.

---

## Tunnel Lifecycle

```
Device starts a service on port 3000
          â”‚
          â–¼
App detects new listener (polling)
          â”‚
          â–¼
App creates SSH port forward: localhost:3000 â†’ device:3000
(if 3000 occupied locally, auto-remaps to 3001)
          â”‚
          â–¼
"Web Dev (3000)" appears in Services section
          â”‚
          â–¼
User works in their browser / IDE normally
          â”‚
          â–¼
Service stops on device
          â”‚
          â–¼
Status dot turns red, tunnel kept for 30s
          â”‚
          â–¼
Service doesn't restart â†’ tunnel removed from list
```

---

## Multi-Device Tunnels

Each device maintains its own set of tunnels. When you switch devices via the selector, the panel shows that device's tunnels. Only the active device's tunnels are forwarded to localhost.

Port conflicts between devices are handled the same way as local conflicts â€” smart remapping to the next available port.

---

## Empty State

When no tunnels are detected:

```
â”€â”€ Services â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

No active services detected.

Start a server on your Distiller and
it will appear here automatically.
```

Direct, informative, no action required from the user. The app is watching.
