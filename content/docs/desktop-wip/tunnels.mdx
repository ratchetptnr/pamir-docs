---
title: Tunnels
description: The core feature â€” SSH tunnels, port forwarding, and IDE access.
---

import { Callout } from 'fumadocs-ui/components/callout'

<Callout title="Product Philosophy">
  **Tunnels are the product.** Everything else in the desktop app exists to support one thing: making the Distiller's services accessible at `localhost` on the user's machine.
</Callout>

## How It Works

When you connect to a Distiller device, the app:

1. **Establishes an SSH connection** to the device
2. **Queries running services** â€” asks the device what ports have listeners
3. **Creates local port forwards** â€” maps each remote port to a local port
4. **Monitors services** â€” polls periodically for new/stopped services and updates tunnels

This means when Claude Code starts a dev server on port 3000 on the Distiller, within seconds `http://localhost:3000` works on your machine. No manual setup.

```
Your Machine                         Distiller Device
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SSH Tunnel     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚â—„â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–ºâ”‚                  â”‚
â”‚ localhost:22 â”‚â”€â”€â”€â”€â”€â”€ port 22 â”€â”€â”€â”‚ SSH server       â”‚
â”‚ localhost:3000â”‚â”€â”€â”€â”€ port 3000 â”€â”€â”‚ Next.js dev      â”‚
â”‚ localhost:8080â”‚â”€â”€â”€â”€ port 8080 â”€â”€â”‚ API server       â”‚
â”‚ localhost:5432â”‚â”€â”€â”€â”€ port 5432 â”€â”€â”‚ PostgreSQL       â”‚
â”‚              â”‚                  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## The Main Panel

The tray popover is the primary interface. It has three sections:

### 1. Header

```
â— Distiller 1          â–¾      âš™ï¸
Connected Â· 22ms Â· 3 tunnels
```

- **Device selector** (â–¾) â€” dropdown to switch between paired devices or add a new one
- **Settings gear** (âš™ï¸) â€” opens the settings window
- **Status line** â€” connection state, round-trip latency, active tunnel count

### 2. Access

The SSH connection itself. One copyable hostname that works everywhere.

```
â”€â”€ Access â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

>_ SSH Host
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ distiller-8x29          [ğŸ“‹]â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Use this host in any IDE with SSH
   remote support.
```

The app manages `~/.ssh/config` behind the scenes so that `ssh distiller-8x29` just works. VS Code Remote SSH, Cursor, JetBrains Gateway â€” they all read from `~/.ssh/config`. No IDE-specific buttons, no URI schemes. One host, works everywhere.

<Callout type="info">
  The SSH host is the primary value of the app. The user copies it, pastes it into their tool of choice, and they're connected. No detection of installed IDEs, no maintenance of URI schemes.
</Callout>

### 3. Services

Auto-discovered services running on the device.

```
â”€â”€ Services â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸŸ¢ Web Dev (3000)        [ğŸ“‹] [â†—]
   http://localhost:3000

ğŸŸ¢ API Server (8080)     [ğŸ“‹] [â†—]
   http://localhost:8080

ğŸŸ¢ PostgreSQL (5432)     [ğŸ“‹]
   localhost:5432

ğŸŸ¢ Redis (6379)          [ğŸ“‹]
   localhost:6379
```

Each service shows:
- **Status indicator** â€” green when tunnel is active, yellow when connecting, red when the remote service stopped
- **Friendly name** â€” auto-labeled from well-known ports, user-renamable
- **Local address** â€” what to use on your machine
- **Copy** (ğŸ“‹) â€” copies the local address to clipboard
- **Open** (â†—) â€” for HTTP services, opens in default browser. Not shown for non-HTTP services (databases, etc.)

### 4. Custom Tunnel

Collapsed by default. For when auto-detection misses a port or you need specific local port mapping.

```
â”€â”€ Custom â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[+ Add port forward]
```

Expands to:

```
Name (optional):  [My Service      ]
Local port:       [9000] â†’ Remote port: [9000]
                              [Add]
```

---

## Auto-Detection

The app queries the device for listening ports over the SSH connection and classifies them by well-known port numbers.

### Well-Known Port Labels

| Port(s) | Auto-label | Icon | Actions |
| :--- | :--- | :--- | :--- |
| 22 | SSH | Terminal icon | Always present in Access section |
| 80, 443 | Web Server | Globe | Copy, Open in browser |
| 3000, 3001, 4000, 5173, 5174, 8000 | Web Dev | Globe | Copy, Open in browser |
| 8080, 8443 | App Server | Globe | Copy, Open in browser |
| 5432 | PostgreSQL | Database icon | Copy |
| 3306 | MySQL | Database icon | Copy |
| 27017 | MongoDB | Database icon | Copy |
| 6379 | Redis | Database icon | Copy |
| 11211 | Memcached | Database icon | Copy |
| Any other | Port XXXX | Generic icon | Copy |

Unknown ports appear as "Port XXXX" and can be renamed by the user. Renames persist across sessions.

### Detection Behavior

- **On connect**: Full port scan, all detected services appear immediately
- **Polling**: Every 5 seconds, check for new/stopped services
- **New service detected**: Tunnel created automatically, appears in list with a subtle entrance animation
- **Service stopped**: Status dot turns red, tunnel remains in list for 30 seconds, then fades out (in case it restarts)
- **User-renamed services**: Persist even after the service stops and restarts

<Callout type="info">
  Auto-detection means the `+` button from the current app is no longer the primary path. Users don't need to manually add tunnels â€” they just start a service on the device and it appears. The custom tunnel form exists only as an escape hatch.
</Callout>

---

## SSH Config Management

The app manages a block in `~/.ssh/config` for each paired device:

```
# â”€â”€ Distiller (managed) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Host distiller-8x29
    HostName 192.168.1.42
    User distiller
    Port 22
    IdentityFile ~/.ssh/distiller_ed25519
# â”€â”€ End Distiller â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

This means every tool that reads `~/.ssh/config` automatically works:
- **VS Code Remote SSH** â€” sees `distiller-8x29` in the host list
- **Cursor** â€” same Remote SSH extension, same config
- **JetBrains Gateway** â€” reads SSH config for connection targets
- **Plain terminal** â€” `ssh distiller-8x29` just works

The app only writes within its own managed block (between the comment markers). It never modifies the user's other SSH config entries.

---

## Tunnel Lifecycle

```
Device starts a service on port 3000
          â”‚
          â–¼
App detects new listener (polling)
          â”‚
          â–¼
App creates SSH port forward: localhost:3000 â†’ device:3000
          â”‚
          â–¼
"Web Dev (3000)" appears in Services section
          â”‚
          â–¼
User copies http://localhost:3000 or clicks [â†—] to open in browser
          â”‚
          â–¼
User works in their browser / IDE normally
          â”‚
          â–¼
Service stops on device
          â”‚
          â–¼
Status dot turns red, tunnel kept for 30s
          â”‚
          â–¼
Service doesn't restart â†’ tunnel removed from list
```

---

## Multi-Device Tunnels

Each device maintains its own set of tunnels. When you switch devices via the selector, the panel shows that device's tunnels. Only the active device's tunnels are forwarded to localhost.

<Callout type="warn">
  **Port conflicts**: If Distiller 1 uses port 3000 and Distiller 2 also uses port 3000, switching to Distiller 2 will remap its port 3000 to the next available local port (e.g., 3001). The app shows the actual local port clearly.
</Callout>

Future consideration: simultaneous multi-device connections where all devices' tunnels are active at once, with automatic port remapping to avoid conflicts. Not in initial scope.

---

## Empty State

When no tunnels are detected:

```
â”€â”€ Services â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

No active services detected.

Start a server on your Distiller and
it will appear here automatically.
```

Direct, informative, no action required from the user. The app is watching.
